<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FERDOUS AI OS | Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/manus.css">
  <style>
    :root {
      --bg: #050508;
      --surface: rgba(14, 14, 18, 0.85);
      --glass: rgba(255, 255, 255, 0.03);
      --primary: #6366f1;
      --accent: #a855f7;
      --gold: #f3c969;
    }
    body { font-family: 'Outfit', sans-serif; background: var(--bg); color: #f8fafc; min-height: 100vh; }
    .glass-panel {
      background: rgba(14, 14, 18, 0.72);
      backdrop-filter: blur(28px);
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 12px 40px rgba(0,0,0,0.45);
    }
    .tool-card {
      background: rgba(14, 14, 18, 0.6);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 20px;
      padding: 24px;
      transition: all 0.2s ease;
      cursor: pointer;
    }
    .tool-card:hover {
      border-color: rgba(99, 102, 241, 0.4);
      box-shadow: 0 0 40px rgba(99, 102, 241, 0.15);
      transform: translateY(-2px);
    }
    .tool-card.active { border-color: rgba(243, 201, 105, 0.5); }
    .gradient-text { background: linear-gradient(135deg, #f3c969, #d9a441); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  </style>
</head>
<body class="min-h-screen">
  <script>
    (function() {
      var SUPABASE_URL = "https://xfzelmpwthqywidyjgzo.supabase.co";
      var SUPABASE_ANON = "sb_publishable_1T-D3i1El5LLR94ev4RQWA_2zRULS9H";
      try { if (window.__SUPABASE_URL) SUPABASE_URL = window.__SUPABASE_URL; if (window.__SUPABASE_ANON) SUPABASE_ANON = window.__SUPABASE_ANON; } catch (_) {}
      window._supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON);
    })();
  </script>

  <div class="flex min-h-screen">
    <aside class="w-72 glass-panel border-r border-white/5 p-6 flex flex-col">
      <div class="mb-8">
        <h1 class="text-2xl font-black tracking-tight">FERDOUS <span class="gradient-text">AI</span></h1>
        <p class="text-xs text-slate-500 mt-1">Operating System</p>
      </div>
      <nav class="flex flex-col gap-2">
        <a href="/dashboard.html" class="px-4 py-3 rounded-xl bg-white/5 font-semibold text-sm">Dashboard</a>
        <a href="/generate.html" class="px-4 py-3 rounded-xl hover:bg-white/5 font-semibold text-sm">Generate</a>
        <a href="/projects.html" class="px-4 py-3 rounded-xl hover:bg-white/5 font-semibold text-sm">Projects</a>
        <a href="/pricing.html" class="px-4 py-3 rounded-xl hover:bg-white/5 font-semibold text-sm">Pricing</a>
      </nav>
      <div class="mt-auto pt-6 border-t border-white/5">
        <div class="text-xs text-slate-500 mb-2">Credits</div>
        <div class="text-2xl font-black" id="creditsCount">--</div>
        <button onclick="logout()" class="mt-4 w-full py-2 rounded-xl bg-red-600/20 hover:bg-red-600/30 text-red-400 font-semibold text-sm">Log out</button>
      </div>
    </aside>

    <main class="flex-1 p-10 overflow-y-auto">
      <div class="max-w-6xl mx-auto">
        <h2 class="text-3xl font-black mb-2">Dashboard</h2>
        <p class="text-slate-500 mb-10">Select a tool to start creating</p>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="toolGrid">
          <a href="/generate.html" class="tool-card active">
            <div class="text-3xl mb-3">üåê</div>
            <h3 class="font-bold text-lg mb-2">AI Website Builder</h3>
            <p class="text-sm text-slate-400">Generate full professional websites from text</p>
          </a>
          <a href="/generate.html#video" class="tool-card">
            <div class="text-3xl mb-3">üé¨</div>
            <h3 class="font-bold text-lg mb-2">AI SaaS Generator</h3>
            <p class="text-sm text-slate-400">Next.js + Auth + DB SaaS platforms</p>
          </a>
          <a href="/generate.html#app" class="tool-card">
            <div class="text-3xl mb-3">‚öõÔ∏è</div>
            <h3 class="font-bold text-lg mb-2">AI App Generator</h3>
            <p class="text-sm text-slate-400">React applications</p>
          </a>
          <a href="/generate.html#video" class="tool-card">
            <div class="text-3xl mb-3">üé•</div>
            <h3 class="font-bold text-lg mb-2">AI Video Studio</h3>
            <p class="text-sm text-slate-400">AI video production plans</p>
          </a>
          <a href="/generate.html#image" class="tool-card">
            <div class="text-3xl mb-3">üñºÔ∏è</div>
            <h3 class="font-bold text-lg mb-2">AI Image Lab</h3>
            <p class="text-sm text-slate-400">AI image systems</p>
          </a>
          <a href="/generate.html#social" class="tool-card">
            <div class="text-3xl mb-3">üì¢</div>
            <h3 class="font-bold text-lg mb-2">AI Marketing Suite</h3>
            <p class="text-sm text-slate-400">Marketing content & social</p>
          </a>
        </div>

        <div class="mt-12 glass-panel rounded-2xl p-6">
          <h3 class="font-bold text-lg mb-4">Recent Projects</h3>
          <div id="recentProjects" class="space-y-2 text-sm">
            <div class="text-slate-500 py-4">Loading...</div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    var token = localStorage.getItem("token");
    if (!token) {
      window._supabase.auth.getSession().then(function(ref) {
        if (!ref.data?.session) location.href = "/login.html";
        else { token = ref.data.session.access_token; localStorage.setItem("token", token); load(); }
      });
    } else { load(); }

    function load() {
      fetch("/api/v1/users/me", { headers: { "Authorization": "Bearer " + token } })
        .then(r => r.json())
        .then(d => { if (d.ok && typeof d.credits === "number") document.getElementById("creditsCount").textContent = d.credits; });

      fetch("/api/v1/projects/list", { headers: { "Authorization": "Bearer " + token } })
        .then(r => r.json())
        .then(d => {
          var el = document.getElementById("recentProjects");
          var list = (d.projects || []).slice(0, 10);
          if (!list.length) { el.innerHTML = "<div class=\"text-slate-500\">No projects yet</div>"; return; }
          el.innerHTML = list.map(p => {
            var url = p.previewUrl || "/generated/" + p.id + "/index.html";
            return "<a href=\"" + url + "\" target=\"_blank\" class=\"block py-2 px-3 rounded-lg hover:bg-white/5\">" + (p.name || p.id) + "</a>";
          }).join("");
        });
    }

    function logout() {
      window._supabase.auth.signOut().then(function() {
        localStorage.clear();
        location.href = "/login.html";
      });
    }
  </script>
</body>
</html>
