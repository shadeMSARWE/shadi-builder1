<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Shadi AI Builder</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">

<style>
body{
  font-family:Tajawal;
  background:#010409;
  color:#fff;
}
.glass{
  background:rgba(15,23,42,.75);
  backdrop-filter:blur(16px);
  border:1px solid #1e293b;
}
</style>
</head>

<body class="min-h-screen flex items-center justify-center">

  <div class="glass p-14 rounded-3xl max-w-xl w-full text-center">
    <h1 class="text-5xl font-black mb-6">
      SHADI <span class="text-indigo-500">AI</span>
    </h1>

    <p class="text-slate-400 text-lg mb-10">
      Ø§Ø¨Ù†Ù Ù…ÙˆØ§Ù‚Ø¹ Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ  
      <br>  
      Ø£Ø³Ø±Ø¹ Ù…Ù† Manus. Ø£ÙØ®Ù….
    </p>

    <a href="/login.html"
       class="inline-block bg-indigo-600 hover:bg-indigo-500 px-12 py-4 rounded-2xl font-black text-lg">
      ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†
    </a>
  </div>

  <!-- âœ… AUTH CHECK â€“ FINAL -->
  <script>
    document.addEventListener("DOMContentLoaded", async () => {

      const supabase = window.supabase.createClient(
        "https://xfzelmpwthqywidyjgzo.supabase.co",
        "sb_publishable_1T-D3i1El5LLR94ev4RQWA_2zRULS9H",
        {
          auth: {
            detectSessionInUrl: true,
            persistSession: true
          }
        }
      );

      const { data, error } = await supabase.auth.getSession();

      if (error) {
        console.error("Auth error:", error);
        return;
      }

      if (data?.session) {
        // Ø®Ø²Ù‘Ù† Ø§Ù„ØªÙˆÙƒÙ†
        localStorage.setItem("token", data.session.access_token);

        // Ù†Ø¸Ù‘Ù Ø§Ù„Ø±Ø§Ø¨Ø·
        window.history.replaceState({}, "", "/");

        // ğŸ”¥ ØªØ­ÙˆÙŠÙ„ Ø¥Ø¬Ø¨Ø§Ø±ÙŠ Ø¨Ø¯ÙˆÙ† Ø±Ø¬Ø¹Ø©
        window.location.replace("/generate.html");
      }

    });
  </script>

</body>
</html>
